<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
    <head>
        <title th:text="|Edit survey ${survey.getTitle()}|">Edit survey</title>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <link rel="stylesheet" type="text/css" media="all"
              href="/css/style.css" th:href="@{/css/style.css}">
    </head>
    <body>
        <p><a href="../home">Home</a></p>

        <!-- Update survey title -->
        <form method="post"
              th:action="@{/create/{id}/update(id=${survey.getId()})}"
              th:object="${survey}">
            <p>Title:<br><input th:field="*{title}" type="text"/></p>
            <p><input type="submit" value="Save"/></p>
        </form>

        <!-- Survey questions -->
        <h3>Questions</h3>
        <ul>
            <li th:each="question : ${survey.questions}">

                <!-- Save question -->
                <form method="post"
                      th:action="@{/create/{surveyID}/editQuestion/{questionID}(surveyID=${survey.getId()}, questionID=${question.id})}">
                    <input type="text" name="newQuestionText" placeholder="Edit question" th:value="${question.question}" />
                    <input type="submit" value="Save" />
                </form>

                <!-- Delete question -->
                <form method="post"
                      th:action="@{/create/{surveyID}/deleteQuestion/{questionID}(surveyID=${survey.getId()}, questionID=${question.id})}">
                    <input type="submit" value="Delete" onclick="return confirm('Are you sure you want to delete this question?');"/>
                </form>
            </li>
        </ul>

        <!-- Add new question to survey -->
        <form method="post"
              th:action="@{/create/{id}/addQuestion(id=${survey.getId()})}">
            <p><button type="submit" value="Add Question">Add question</button></p>
        </form>
</body>
</html>


