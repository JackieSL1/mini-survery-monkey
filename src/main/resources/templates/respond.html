<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title th:text="${survey.title}"></title>
</head>
<body>
<h2 th:text="${survey.title}"></h2>
<!-- Survey questions -->
<form method="post" th:action="@{/r/{id}/submit(id=${survey.id})}" th:object="${formData}">
    <ol>
        <li th:each="input, inputStat: *{responseInputs}">
            <p th:text="${input.question.question}"></p>
            <input th:field="*{responseInputs[__${inputStat.index}__].questionType}" type="hidden">
            <input th:field="*{responseInputs[__${inputStat.index}__].question}" type="hidden">
            <th:block th:switch="*{responseInputs[__${inputStat.index}__].questionType}">
                <div th:case="'CommentQuestion'">
                    <input th:field="*{responseInputs[__${inputStat.index}__].responseText}" type="text">
                </div>
                <div th:case="*">
                    <p th:text="|Unhandled question type: ${input.questionType}|">
                </div>
            </th:block>
        </li>
    </ol>

    <input type="submit" value="Submit response"/>
</form>
</body>
</html>